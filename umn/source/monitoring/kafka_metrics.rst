:original_name: dms-ug-180413002.html

.. _dms-ug-180413002:

Kafka Metrics
=============

Introduction
------------

This section describes DMS metrics reported to Cloud Eye as well as their namespace and dimensions. You can use the Cloud Eye console to query the Kafka metrics and alarms.

Namespace
---------

SYS.DMS

Instance Metrics
----------------

.. table:: **Table 1** Instance metrics

   +--------------------+----------------------+-----------------------------------------------------------------------------+-----------------+------------------+------------------------------+
   | Metric ID          | Metric Name          | Description                                                                 | Value Range     | Monitored Object | Monitoring Period (Raw Data) |
   +====================+======================+=============================================================================+=================+==================+==============================+
   | current_partitions | Partitions           | Number of used partitions in the instance                                   | 0~1800          | Kafka instance   | 1 minute                     |
   |                    |                      |                                                                             |                 |                  |                              |
   |                    |                      | Unit: count                                                                 |                 |                  |                              |
   +--------------------+----------------------+-----------------------------------------------------------------------------+-----------------+------------------+------------------------------+
   | current_topics     | Topics               | Number of created topics in the instance                                    | 0-600           | Kafka instance   | 1 minute                     |
   |                    |                      |                                                                             |                 |                  |                              |
   |                    |                      | Unit: count                                                                 |                 |                  |                              |
   +--------------------+----------------------+-----------------------------------------------------------------------------+-----------------+------------------+------------------------------+
   | group_msgs         | Accumulated Messages | Total number of accumulated messages in all consumer groups of the instance | 0-1,000,000,000 | Kafka instance   | 1 minute                     |
   |                    |                      |                                                                             |                 |                  |                              |
   |                    |                      | Unit: count                                                                 |                 |                  |                              |
   +--------------------+----------------------+-----------------------------------------------------------------------------+-----------------+------------------+------------------------------+

Broker Metrics
--------------

.. table:: **Table 2** Broker metrics

   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | Metric ID                    | Metric Name                                   | Description                                                                                                                   | Value Range         | Monitored Object      | Monitoring Period (Raw Data) |
   +==============================+===============================================+===============================================================================================================================+=====================+=======================+==============================+
   | broker_data_size             | Message Size                                  | Total size of messages in the broker                                                                                          | 0-5,000,000,000,000 | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: byte, KB, MB, GB, TB or PB                                                                                              |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_messages_in_rate      | Message Creation Rate                         | Number of messages created per second                                                                                         | 0-500,000           | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: count/s                                                                                                                 |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_bytes_out_rate        | Message Retrieval                             | Number of bytes retrieved per second                                                                                          | 0-500,000,000       | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: byte/s, KB/s, MB/s, or GB/s                                                                                             |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_bytes_in_rate         | Message Creation                              | Number of bytes created per second                                                                                            | 0-500,000,000       | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: byte/s, KB/s, MB/s, or GB/s                                                                                             |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_public_bytes_in_rate  | Public Inbound Traffic                        | Inbound traffic over public networks per second                                                                               | 0-500,000,000       | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: byte/s, KB/s, MB/s, or GB/s                                                                                             |                     |                       |                              |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | .. note::                                                                                                                     |                     |                       |                              |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               |    You can view this metric on the EIP console if public access has been enabled and EIPs have been assigned to the instance. |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_public_bytes_out_rate | Public Outbound Traffic                       | Outbound traffic over public networks per second                                                                              | 0-500,000,000       | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: byte/s, KB/s, MB/s, or GB/s                                                                                             |                     |                       |                              |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | .. note::                                                                                                                     |                     |                       |                              |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               |    You can view this metric on the EIP console if public access has been enabled and EIPs have been assigned to the instance. |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_fetch_mean            | Average Message Retrieval Processing Duration | Average time that the broker spends processing message retrieval requests                                                     | 0-10,000            | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: ms                                                                                                                      |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_produce_mean          | Average Message Creation Processing Duration  | Average time that the broker spends processing message creation requests                                                      | 0-10,000            | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: ms                                                                                                                      |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_cpu_core_load         | Average Load per CPU Core                     | Average load of each CPU core of the Kafka VM                                                                                 | 0-20                | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: %                                                                                                                       |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_disk_usage            | Disk Capacity Usage                           | Disk usage of the Kafka VM                                                                                                    | 0-100               | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: %                                                                                                                       |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_memory_usage          | Memory Usage                                  | Memory usage of the Kafka VM                                                                                                  | 0-100               | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: %                                                                                                                       |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_heap_usage            | JVM Heap Memory Usage of Kafka                | Heap memory usage of the Kafka JVM                                                                                            | 0-100               | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: %                                                                                                                       |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_alive                 | Broker Alive                                  | Whether the Kafka broker is alive                                                                                             | **1**: alive        | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               |                                                                                                                               | **0**: not alive    |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_connections           | Connections                                   | Total number of TCP connections on the Kafka broker                                                                           | > 0                 | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: count                                                                                                                   |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_cpu_usage             | CPU Usage                                     | CPU usage of the Kafka VM                                                                                                     | 0-100               | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: %                                                                                                                       |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_disk_read_await       | Average Disk Read Time                        | Average time for each disk I/O read in the monitoring period                                                                  | > 0                 | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: ms                                                                                                                      |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_disk_write_await      | Average Disk Write Time                       | Average time for each disk I/O write in the monitoring period                                                                 | > 0                 | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: ms                                                                                                                      |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_total_bytes_in_rate   | Inbound Traffic                               | Inbound traffic per second                                                                                                    | > 0                 | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: byte/s                                                                                                                  |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+
   | broker_total_bytes_out_rate  | Outbound Traffic                              | Outbound traffic per second                                                                                                   | > 0                 | Kafka instance broker | 1 minute                     |
   |                              |                                               |                                                                                                                               |                     |                       |                              |
   |                              |                                               | Unit: byte/s                                                                                                                  |                     |                       |                              |
   +------------------------------+-----------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+---------------------+-----------------------+------------------------------+

Topic Metrics
-------------

.. table:: **Table 3** Topic metrics

   +------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------+---------------------+---------------------------+------------------------------+
   | Metric ID              | Metric Name           | Description                                                                                                    | Value Range         | Monitored Object          | Monitoring Period (Raw Data) |
   +========================+=======================+================================================================================================================+=====================+===========================+==============================+
   | topic_bytes_in_rate    | Message Creation      | Number of bytes created per second                                                                             | 0-500,000,000       | Topic in a Kafka instance | 1 minute                     |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | Unit: byte/s, KB/s, MB/s, or GB/s                                                                              |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | .. note::                                                                                                      |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       |    This metric is available only when **Scope** is set to **Basic monitoring** on the **Queues** tab page.     |                     |                           |                              |
   +------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------+---------------------+---------------------------+------------------------------+
   | topic_bytes_out_rate   | Message Retrieval     | Number of bytes retrieved per second                                                                           | 0-500,000,000       | Topic in a Kafka instance | 1 minute                     |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | Unit: byte/s, KB/s, MB/s, or GB/s                                                                              |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | .. note::                                                                                                      |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       |    This metric is available only when **Scope** is set to **Basic monitoring** on the **Queues** tab page.     |                     |                           |                              |
   +------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------+---------------------+---------------------------+------------------------------+
   | topic_data_size        | Message Size          | Total size of messages in the queue                                                                            | 0-5,000,000,000,000 | Topic in a Kafka instance | 1 minute                     |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | Unit: byte, KB, MB, GB, TB or PB                                                                               |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | .. note::                                                                                                      |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       |    This metric is available only when **Scope** is set to **Basic monitoring** on the **Queues** tab page.     |                     |                           |                              |
   +------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------+---------------------+---------------------------+------------------------------+
   | topic_messages         | Total Messages        | Total number of messages in the queue                                                                          | >= 0                | Topic in a Kafka instance | 1 minute                     |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | Unit: count                                                                                                    |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | .. note::                                                                                                      |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       |    This metric is available only when **Scope** is set to **Basic monitoring** on the **Queues** tab page.     |                     |                           |                              |
   +------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------+---------------------+---------------------------+------------------------------+
   | topic_messages_in_rate | Message Creation Rate | Number of messages created per second                                                                          | 0-500,000           | Topic in a Kafka instance | 1 minute                     |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | Unit: count/s                                                                                                  |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | .. note::                                                                                                      |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       |    This metric is available only when **Scope** is set to **Basic monitoring** on the **Queues** tab page.     |                     |                           |                              |
   +------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------+---------------------+---------------------------+------------------------------+
   | partition_messages     | Partition Messages    | Total number of messages in the partition                                                                      | >= 0                | Topic in a Kafka instance | 1 minute                     |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | Unit: count                                                                                                    |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | .. note::                                                                                                      |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       |    This metric is available only when **Scope** is set to **Partition monitoring** on the **Queues** tab page. |                     |                           |                              |
   +------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------+---------------------+---------------------------+------------------------------+
   | produced_messages      | Created Messages      | Number of messages that have been created                                                                      | >= 0                | Topic in a Kafka instance | 1 minute                     |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | Unit: count                                                                                                    |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       | .. note::                                                                                                      |                     |                           |                              |
   |                        |                       |                                                                                                                |                     |                           |                              |
   |                        |                       |    This metric is available only when **Scope** is set to **Partition monitoring** on the **Queues** tab page. |                     |                           |                              |
   +------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------+---------------------+---------------------------+------------------------------+

Consumer Group Metrics
----------------------

.. table:: **Table 4** Consumer group metrics

   +----------------------------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------+------------------------------------+------------------------------+
   | Metric ID                  | Metric Name                 | Description                                                                                                                                                                        | Value Range         | Monitored Object                   | Monitoring Period (Raw Data) |
   +============================+=============================+====================================================================================================================================================================================+=====================+====================================+==============================+
   | messages_consumed          | Retrieved Messages          | Number of messages that have been retrieved in the consumer group                                                                                                                  | >= 0                | Consumer group of a Kafka instance | 1 minute                     |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | Unit: count                                                                                                                                                                        |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | .. note::                                                                                                                                                                          |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             |    This metric is available only when **Queue** is set to a specified topic name and **Monitoring Type** is set to **Partition monitoring** on the **By Consumer Group** tab page. |                     |                                    |                              |
   +----------------------------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------+------------------------------------+------------------------------+
   | messages_remained          | Available Messages          | Number of messages that can be retrieved in the consumer group                                                                                                                     | >= 0                | Consumer group of a Kafka instance | 1 minute                     |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | Unit: count                                                                                                                                                                        |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | .. note::                                                                                                                                                                          |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             |    This metric is available only when **Queue** is set to a specified topic name and **Monitoring Type** is set to **Partition monitoring** on the **By Consumer Group** tab page. |                     |                                    |                              |
   +----------------------------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------+------------------------------------+------------------------------+
   | topic_messages_remained    | Topic Available Messages    | Number of remaining messages that can be retrieved from the specified topic in the consumer group                                                                                  | 0 to 2\ :sup:`63`-1 | Consumer group of a Kafka instance | 1 minute                     |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | Unit: Count                                                                                                                                                                        |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | .. note::                                                                                                                                                                          |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             |    This metric is available only when **Queue** is set to a specified topic name and **Monitoring Type** is set to **Basic monitoring** on the **By Consumer Group** tab page.     |                     |                                    |                              |
   +----------------------------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------+------------------------------------+------------------------------+
   | topic_messages_consumed    | Topic Retrieved Messages    | Number of messages that have been retrieved from the specified topic in the consumer group                                                                                         | 0 to 2\ :sup:`63`-1 | Consumer group of a Kafka instance | 1 minute                     |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | Unit: Count                                                                                                                                                                        |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | .. note::                                                                                                                                                                          |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             |    This metric is available only when **Queue** is set to a specified topic name and **Monitoring Type** is set to **Basic monitoring** on the **By Consumer Group** tab page.     |                     |                                    |                              |
   +----------------------------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------+------------------------------------+------------------------------+
   | consumer_messages_remained | Consumer Available Messages | Number of remaining messages that can be retrieved in the consumer group                                                                                                           | 0 to 2\ :sup:`63`-1 | Consumer group of a Kafka instance | 1 minute                     |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | Unit: Count                                                                                                                                                                        |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | .. note::                                                                                                                                                                          |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             |    This metric is available only when **Queue** is set to **All queues** on the **By Consumer Group** tab page.                                                                    |                     |                                    |                              |
   +----------------------------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------+------------------------------------+------------------------------+
   | consumer_messages_consumed | Consumer Retrieved Messages | Number of messages that have been retrieved in the consumer group                                                                                                                  | 0 to 2\ :sup:`63`-1 | Consumer group of a Kafka instance | 1 minute                     |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | Unit: Count                                                                                                                                                                        |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             | .. note::                                                                                                                                                                          |                     |                                    |                              |
   |                            |                             |                                                                                                                                                                                    |                     |                                    |                              |
   |                            |                             |    This metric is available only when **Queue** is set to **All queues** on the **By Consumer Group** tab page.                                                                    |                     |                                    |                              |
   +----------------------------+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------+------------------------------------+------------------------------+

Dimension
---------

======================= ============================================
Key                     Value
======================= ============================================
kafka_instance_id       Kafka instance
kafka_broker            Kafka instance broker
kafka_topics            Topic in a Kafka instance
kafka_partitions        Partition in a Kafka instance
kafka_groups-partitions Partition consumer group in a Kafka instance
kafka_groups_topics     Topic consumer group in a Kafka instance
kafka_groups            Consumer group of a Kafka instance
======================= ============================================
