:original_name: CreateInstanceTopic.html

.. _CreateInstanceTopic:

Creating a Topic for a Kafka Instance
=====================================

Function
--------

This API is used to create a topic for a Kafka instance.

URI
---

POST /v2/{project_id}/instances/{instance_id}/topics

.. table:: **Table 1** Path Parameters

   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                               |
   +=================+=================+=================+===========================================================================================================+
   | project_id      | Yes             | String          | Project ID. For details about how to obtain it, see :ref:`Obtaining a Project ID <kafka-api-0036212547>`. |
   |                 |                 |                 |                                                                                                           |
   |                 |                 |                 | Minimum: **1**                                                                                            |
   |                 |                 |                 |                                                                                                           |
   |                 |                 |                 | Maximum: **64**                                                                                           |
   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------+
   | instance_id     | Yes             | String          | Instance ID.                                                                                              |
   |                 |                 |                 |                                                                                                           |
   |                 |                 |                 | Minimum: **1**                                                                                            |
   |                 |                 |                 |                                                                                                           |
   |                 |                 |                 | Maximum: **64**                                                                                           |
   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request body parameters

   +---------------------+-----------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter           | Mandatory       | Type                                                                                           | Description                                                                                                                                                                                      |
   +=====================+=================+================================================================================================+==================================================================================================================================================================================================+
   | id                  | Yes             | String                                                                                         | Topic name. A topic name consists of 3 to 200 characters, starts with a letter, and contains only letters, hyphens (-), underscores (_), periods (.), and digits.                                |
   |                     |                 |                                                                                                |                                                                                                                                                                                                  |
   |                     |                 |                                                                                                | Minimum: **3**                                                                                                                                                                                   |
   |                     |                 |                                                                                                |                                                                                                                                                                                                  |
   |                     |                 |                                                                                                | Maximum: **200**                                                                                                                                                                                 |
   +---------------------+-----------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | replication         | No              | Integer                                                                                        | Number of replicas, which is configured to ensure data reliability. Value range: 1 to 3.                                                                                                         |
   |                     |                 |                                                                                                |                                                                                                                                                                                                  |
   |                     |                 |                                                                                                | Minimum: **1**                                                                                                                                                                                   |
   |                     |                 |                                                                                                |                                                                                                                                                                                                  |
   |                     |                 |                                                                                                | Maximum: **3**                                                                                                                                                                                   |
   +---------------------+-----------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sync_message_flush  | No              | Boolean                                                                                        | Whether synchronous flushing is enabled. The default value is **false**. Synchronous flushing compromises performance.                                                                           |
   +---------------------+-----------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | partition           | No              | Integer                                                                                        | Number of topic partitions, which is used to set the number of concurrently consumed messages.Value range: 1-100.                                                                                |
   |                     |                 |                                                                                                |                                                                                                                                                                                                  |
   |                     |                 |                                                                                                | Minimum: **1**                                                                                                                                                                                   |
   |                     |                 |                                                                                                |                                                                                                                                                                                                  |
   |                     |                 |                                                                                                | Maximum: **100**                                                                                                                                                                                 |
   +---------------------+-----------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sync_replication    | No              | Boolean                                                                                        | Whether synchronous replication is enabled. After this function is enabled, the **acks** parameter on the producer client must be set to **-1**. Otherwise, this parameter does not take effect. |
   +---------------------+-----------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | retention_time      | No              | Integer                                                                                        | Indicates the retention period of a message. The default value is **72**.Value range: 1-720. Unit: hour.                                                                                         |
   +---------------------+-----------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | topic_other_configs | No              | Array of :ref:`topic_other_configs <createinstancetopic__request_topic_other_configs>` objects | Topic configuration.                                                                                                                                                                             |
   |                     |                 |                                                                                                |                                                                                                                                                                                                  |
   |                     |                 |                                                                                                | Array Length: **0 - 100**                                                                                                                                                                        |
   +---------------------+-----------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | topic_desc          | No              | String                                                                                         | Topic description.                                                                                                                                                                               |
   |                     |                 |                                                                                                |                                                                                                                                                                                                  |
   |                     |                 |                                                                                                | Minimum: **0**                                                                                                                                                                                   |
   |                     |                 |                                                                                                |                                                                                                                                                                                                  |
   |                     |                 |                                                                                                | Maximum: **200**                                                                                                                                                                                 |
   +---------------------+-----------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _createinstancetopic__request_topic_other_configs:

.. table:: **Table 3** topic_other_configs

   ========= ========= ====== ====================
   Parameter Mandatory Type   Description
   ========= ========= ====== ====================
   name      No        String Configuration name.
   value     No        String Configuration value.
   ========= ========= ====== ====================

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +-----------------------+-----------------------+-----------------------+
   | Parameter             | Type                  | Description           |
   +=======================+=======================+=======================+
   | name                  | String                | Topic name.           |
   |                       |                       |                       |
   |                       |                       | Minimum: **3**        |
   |                       |                       |                       |
   |                       |                       | Maximum: **200**      |
   +-----------------------+-----------------------+-----------------------+

Example Requests
----------------

Creating a topic named test01

.. code-block:: text

   POST https://{endpoint}/v2/{project_id}/instances/{instance_id}/topics

   {
     "id" : "test01",
     "partition" : 3,
     "replication" : 3,
     "retention_time" : 72,
     "sync_message_flush" : false,
     "sync_replication" : "false",
     "topic_other_configs" : [ {
       "name" : "message.timestamp.type",
       "value" : "LogAppendTime"
     }, {
       "name" : "max.message.bytes",
       "value" : 10485760
     } ],
     "topic_desc" : ""
   }

Example Responses
-----------------

**Status code: 200**

Successful. A topic name is returned.

.. code-block::

   {
     "name" : "test01"
   }

Status Codes
------------

=========== =====================================
Status Code Description
=========== =====================================
200         Successful. A topic name is returned.
=========== =====================================

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
